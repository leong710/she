# PPC
Particular Physical Checkup (PPC) - 特殊健康檢查

## 240814 -- 起始工程
    1. 建構權限管理介面
    2. 建構廠區清單管理：
        2-1. 添加新欄位[osha_id]
        2-2. _local功能將視實際需求進行取捨。<待調整>

    3. 建構特殊危害健康作業管理index：
        3-1. 新增篩選查詢功能。
        3-2. 新增下載Excel介面功能(根據篩選結果輸出)。
        3-3. 新增上傳Excel介面功能+上傳結果檢視和範例檔。

    4. 新增單筆新增功能 form.php，增加部門代號查詢功能：
        4-1. 同步更新api-center-hrdb的服務功能。
        4-2. 增加監聽驗證：當類別選定"噪音"時，會提示均能音量和8小時平均音壓二擇一填寫。
        4-3. 增加監聽驗證：HE_CATE/類別至少要選一項，防止空單送出錯誤。(採用判斷空陣列方式)
        4-4. 新增模式有Reset鈕，編輯模式不存在。
        4-5. submit送出給process_crud.php進行處理，內藏(check_HE_CATE)辨識部門代號+類別是否是第一筆，若是則以swal顯示提醒!

    5. 新增危害類別管理功能：
        5-1. 可以新增新[代碼][類別]
        5-2. 可以刪除舊類別
        5-3. 未設置編輯功能，防止物件錯誤，直接用5-1、5-2取代。
        5-4. 檔案輸出成JSON檔，節省資料庫資源。

## 240821
    1. 建構特危作業人員管理：
        1-1. 建構篩選階層：廠別 > 部門代號 > 取得人事資料庫(hrdb即時)。
        1-2. audit 廠別、部門代號 至少需勾選一項，才能進行查詢。
        1-3. 增加驗證(is-invalid)提醒(invalid-feedback)功能，提醒使用人勾選。
        1-4. 取得之員工資料暫時貼在p2(員工清單中)，因為資料龐大，搭配外掛function DataTable來使用，可達到分頁、排序、搜尋...等功能。
        1-5. 預留功能：單筆新增、Excel批次上傳、Excel下載功能。
        1-6. 因為員工資料取得後的作為與顯示方式需與user(惠旭)進行協調，顯示配置方式、對應功能 (8/19已提供)
        1-7. 增加一清空table(_shLocal)功能，因為權限過大，需要開通mySQL內user權限，並限制使用對象、使用時機(使用前禁止上傳或編輯)。

    extra. deBug工作：
        2-1. 圖書館-深耕 新增文件 原本-限制窗口以上；升級改版-環安同仁。
        2-2. PPE系統 廠調器材 原本收貨人需要在db中才能顯示 接收按鈕；升級改版-只要是自己轄區都可接收。

## 240828
    1. 續建特危作業人員管理：
        1.1. Excel批次上傳功能建構完成。
        1.2. Excel批次上傳後會篩出部門代碼，並以此部門代碼匯入(整併)到目前使用的特危作業清單 
        1.3. 單筆新增功能建構完成，可以工號、姓名、NT帳號進行模糊搜尋，在依查詢結果選擇帶入。
        1.4. 單筆新增後會篩出部門代碼，並以此部門代碼匯入(整併)到目前使用的特危作業清單 
        1.5. 增加單筆名單刪除功能，可剔除非必要人員。
        1.6. 增加特作項目修改功能，可針對之前選錯的部分進行修正。==> 有Bug，改用先前單選特危作業的方式進行覆蓋。
        1.7. 當選定或修正特作項目後，隨即更新該筆資料與顯示，並篩出有含噪音之項目，做資格判定(目前完成方法A+B+C)
        1.8. 增加噪音判斷公式：checkNoise，可判定出樣本A、樣本B和驗證結果